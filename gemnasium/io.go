package main

import (
	"os"

	"gopkg.in/yaml.v2"
)

func loadAdvisory(path string) (*Advisory, error) {
	f, err := os.Open(path)
	if err != nil {
		return nil, err
	}
	defer f.Close()

	adv := Advisory{}
	err = yaml.NewDecoder(f).Decode(&adv)
	return &adv, err
}

func writeAdvisory(adv *Advisory, path string) error {
	f, err := os.OpenFile(path, os.O_RDWR|os.O_CREATE|os.O_TRUNC, 0644)
	if err != nil {
		return err
	}
	defer f.Close()
	if err = yaml.NewEncoder(f).Encode(adv); err != nil {
		return err
	}
	return nil
}
