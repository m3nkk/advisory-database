---
title: GitLab Advisory Database Stats
output:
  html_document:
    toc: false
    theme: sandstone
---

```{r include=FALSE, setup-hook, echo=FALSE}
require(lubridate)
```

### Adivsory distribution

The pie chart below illustrates the advisory distribution for the package types we support by providing their total number and percentages.

```{r echo=FALSE}
source('compute_charts.R')
package_type_distro('../data/mttm.csv')
```


### Number of CVEs

The pie chart below illustrates how many advisories in the database are originating from NVD.

```{r echo=FALSE}
source('compute_charts.R')
cve_distro('../data/mttm.csv')
```


### Number of merged CVEs

The barchart below depicts the number of advisories (CVEs only) that have been merged during the last couple of months starting from May 2019 where the initial data was imported to gemnasium-db. Note, that we are only counting newly added advisories (not updated ones).

```{r echo=FALSE}
source('compute_charts.R')
merged_advisories('../data/mttm.csv')
```


### Throughput

Throughput indicates the efficiency of adding new advisories to gemnasium-db; more automation increases the throughput.
The plot below shows how the throughput developed over the last couple of month. For every month throughput is computed with: $\frac{|\text{Advisories}|}{\text{day}}$. The spike for May 2019 is due to the initial import of advisory data.

```{r echo=FALSE}
source('compute_charts.R')
throughput('../data/mttm.csv')
```

### Coverage 

Coverage indicates how many advisories from NVD have been identified as relevant in the context of dependency scanning. The barchart below shows how many CVEs (in %) were translated into advisories because of their relation to a supported package. The X-axis depicts the year of the NVD data feed wheras the Y-asis depicts percentage of extracted CVEs.

```{r echo=FALSE}
source('compute_charts.R')
coverage('../data/mttm.csv', '../data/nvd.csv')
```

### TTM (Time to Merge)

Time to merge (TTM) measures the expired time between the publication of a CVE on NVD and the point in time where the advisory is merged into gemnasium-db. We have two different flavours of TTM: Mean Time To Merge and Median Time To Merge. The chart below depicts the development of the accummulated Mean and Median TTMs over the past months. 

```{r echo=FALSE}
source('compute_charts.R')
acc_mean_ttm_month('../data/mttm.csv')
```
