---
identifier: CVE-2015-7577
title: Nested attributes rejection proc bypass
description: "When using the nested attributes feature in Active Record you can prevent
  the \r\ndestruction of associated records by passing the `allow_destroy: false`
  option \r\nto the `accepts_nested_attributes_for` method.\r\nThe `allow_destroy`
  flag prevents the `:reject_if` proc from \r\nbeing called because it assumes that
  the record will be destroyed anyway. \r\n\r\nHowever this isn't true if `:allow_destroy`
  is false so this leads to changes \r\nthat would have been rejected being applied
  to the record. Attackers could use \r\nthis do things like set attributes to invalid
  values and to clear all of the \r\nattributes amongst other things. The severity
  will be dependent on how the \r\napplication has used this feature. "
date: '2016-01-25'
affected_range: ">=5.0.0.alpha <5.0.0.beta1.1||>=4.2.0.alpha <4.2.5.1||>=4.0.0.alpha
  <4.1.14.1||>=3.1.0.alpha <3.2.22.1"
fixed_versions:
- 3.2.22.1
- 4.1.14.1
- 4.2.5.1
- 5.0.0.beta1.1
affected_versions: 3.1.0 and newer
not_impacted: 3.0.x and older
solution: Upgrade to latest, apply patches or use workaround. See provided link.
credit: Justin Coyne
urls:
- https://groups.google.com/forum/#!topic/rubyonrails-security/cawsWcQ6c8g
uuid: b8dc5acf-2082-4d2a-bcb7-2da555724b59
package_slug: gem/activerecord
